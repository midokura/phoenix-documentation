"use strict";(globalThis.webpackChunkfoo=globalThis.webpackChunkfoo||[]).push([[7662],{8403(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"service-operator/VPN_CONFIGURATION","title":"VPN Configuration for Tenant Users","description":"This guide explains how to set up VPN access for users who have been assigned to a tenant.","source":"@site/versioned_docs/version-v1.1/service-operator/VPN_CONFIGURATION.md","sourceDirName":"service-operator","slug":"/service-operator/VPN_CONFIGURATION","permalink":"/foo/docs/v1.1/service-operator/VPN_CONFIGURATION","draft":false,"unlisted":false,"tags":[],"version":"v1.1","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"OS Requirements","permalink":"/foo/docs/v1.1/service-operator/OS_REQUIREMENTS"}}');var i=r(4848),o=r(8453);const s={},a="VPN Configuration for Tenant Users",c={},h=[{value:"Overview",id:"overview",level:2},{value:"When to Generate VPN Configuration",id:"when-to-generate-vpn-configuration",level:2},{value:"Operator: Fetch VPN Configuration Script",id:"operator-fetch-vpn-configuration-script",level:2},{value:"User: Generate VPN Configuration",id:"user-generate-vpn-configuration",level:2},{value:"Step 1: Generate Key Pair",id:"step-1-generate-key-pair",level:3},{value:"Step 2: Generate VPN Configuration",id:"step-2-generate-vpn-configuration",level:3},{value:"Step 3: Import Configuration",id:"step-3-import-configuration",level:3}];function p(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"vpn-configuration-for-tenant-users",children:"VPN Configuration for Tenant Users"})}),"\n",(0,i.jsx)(n.p,{children:"This guide explains how to set up VPN access for users who have been assigned to a tenant."}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"When a user is added to a tenant, the operator can generate a VPN configuration script for that user. The user then combines this script with their private key to create a complete VPN configuration."}),"\n",(0,i.jsx)(n.h2,{id:"when-to-generate-vpn-configuration",children:"When to Generate VPN Configuration"}),"\n",(0,i.jsx)(n.p,{children:"VPN configuration can be generated after a user is associated with a tenant through either:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"At tenant creation"}),": ",(0,i.jsx)(n.code,{children:"POST /tenants"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Adding user to existing tenant"}),": ",(0,i.jsx)(n.code,{children:"PUT /tenants/{tenant_id}/users/{user_id}"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"operator-fetch-vpn-configuration-script",children:"Operator: Fetch VPN Configuration Script"}),"\n",(0,i.jsx)(n.p,{children:"As an operator, retrieve the VPN configuration script for a user:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -H "Authorization: Bearer $JWT_TOKEN" \\\n     -H "Content-Type: application/json" \\\n     "${API_BASE_URL}/users/${USER_ID}/vpn" > vpn-config-script.sh\n'})}),"\n",(0,i.jsx)(n.p,{children:"Provide this script to the user."}),"\n",(0,i.jsx)(n.h2,{id:"user-generate-vpn-configuration",children:"User: Generate VPN Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"step-1-generate-key-pair",children:"Step 1: Generate Key Pair"}),"\n",(0,i.jsx)(n.p,{children:"The user must first generate their WireGuard private and public keys:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"wg genkey > privatekey && wg pubkey < privatekey > pubkey\n"})}),"\n",(0,i.jsx)(n.p,{children:"This creates two files:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"privatekey"}),": Keep this secret"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pubkey"}),": Share this with the operator if required"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-2-generate-vpn-configuration",children:"Step 2: Generate VPN Configuration"}),"\n",(0,i.jsx)(n.p,{children:"Run the configuration script received from the operator, injecting your private key:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cat privatekey | bash vpn-config-script.sh > wg.conf\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This creates ",(0,i.jsx)(n.code,{children:"wg.conf"})," with your complete VPN configuration."]}),"\n",(0,i.jsx)(n.h3,{id:"step-3-import-configuration",children:"Step 3: Import Configuration"}),"\n",(0,i.jsx)(n.p,{children:"Import the configuration into your system using the WireGuard UI or CLI. Example for the CLI:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo wg-quick up ./wg.conf\n"})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},8453(e,n,r){r.d(n,{R:()=>s,x:()=>a});var t=r(6540);const i={},o=t.createContext(i);function s(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);