"use strict";(globalThis.webpackChunkfoo=globalThis.webpackChunkfoo||[]).push([[9721],{7003(e,n,r){r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"service-operator/OPERATOR_API_GUIDE","title":"Operator API Usage Guide","description":"Overview","source":"@site/versioned_docs/version-v1.0/service-operator/OPERATOR_API_GUIDE.md","sourceDirName":"service-operator","slug":"/service-operator/OPERATOR_API_GUIDE","permalink":"/foo/docs/v1.0/service-operator/OPERATOR_API_GUIDE","draft":false,"unlisted":false,"tags":[],"version":"v1.0","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Observability Dashboards","permalink":"/foo/docs/v1.0/service-operator/OBSERVABILITY_DASHBOARDS"},"next":{"title":"OS Requirements","permalink":"/foo/docs/v1.0/service-operator/OS_REQUIREMENTS"}}');var s=r(4848),a=r(8453);const o={},i="Operator API Usage Guide",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Authentication",id:"authentication",level:2},{value:"Getting Your Authentication Token",id:"getting-your-authentication-token",level:3},{value:"JWT Token Authentication",id:"jwt-token-authentication",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"User Management APIs",id:"user-management-apis",level:3},{value:"List All Users",id:"list-all-users",level:4},{value:"Create a New User",id:"create-a-new-user",level:4},{value:"Get Current User Information",id:"get-current-user-information",level:4},{value:"Update User Information",id:"update-user-information",level:4},{value:"Delete a User",id:"delete-a-user",level:4},{value:"Tenant Management APIs",id:"tenant-management-apis",level:3},{value:"List All Tenants",id:"list-all-tenants",level:4},{value:"Create a New Tenant",id:"create-a-new-tenant",level:4},{value:"Delete a Tenant",id:"delete-a-tenant",level:4},{value:"Add User to Tenant",id:"add-user-to-tenant",level:4},{value:"Remove User from Tenant",id:"remove-user-from-tenant",level:4},{value:"Common Use Cases and Workflows",id:"common-use-cases-and-workflows",level:2},{value:"Use Case 1: Create a New User and Add to Existing Tenant",id:"use-case-1-create-a-new-user-and-add-to-existing-tenant",level:3},{value:"Use Case 2: Move User Between Tenants",id:"use-case-2-move-user-between-tenants",level:3},{value:"Use Case 3: Create New Project with Team",id:"use-case-3-create-new-project-with-team",level:3},{value:"Use Case 4: Employee Offboarding",id:"use-case-4-employee-offboarding",level:3},{value:"Use Case 5: Update User Role",id:"use-case-5-update-user-role",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"operator-api-usage-guide",children:"Operator API Usage Guide"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"Guide for using the Operator APIs to manage users and tenants."}),"\n",(0,s.jsx)(n.p,{children:"This guide provides practical instructions for using IaaS Operator APIs to manage users and tenants. The Operator APIs are a focused subset of the full IaaS API, designed specifically for system operators to perform essential user and tenant management tasks."}),"\n",(0,s.jsx)(n.h2,{id:"authentication",children:"Authentication"}),"\n",(0,s.jsx)(n.h3,{id:"getting-your-authentication-token",children:"Getting Your Authentication Token"}),"\n",(0,s.jsx)(n.p,{children:"To access the Operator APIs, you need to obtain an authentication token from the NTY Gridworks Dashboard:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Login to the IaaS UI"})," with your operator account"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Navigate to the Operator tab"})," in the interface"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Copy the Auth token"})," displayed in the Operator section"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use the token"})," in your API requests"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"jwt-token-authentication",children:"JWT Token Authentication"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Set your API base URL (adjust for your environment)\nexport API_BASE_URL="http://base-url/api"\n\n# Set your JWT token (obtained from UI Operator tab)\nexport JWT_TOKEN="your-jwt-token-from-ui-operator-tab"\n\n# Use in API calls\ncurl -H "Authorization: Bearer $JWT_TOKEN" \\\n     -H "Content-Type: application/json" \\\n     "${API_BASE_URL}/users/me"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,s.jsx)(n.p,{children:"Complete API documentation is available on your running IaaS server:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Swagger UI"}),": ",(0,s.jsx)(n.code,{children:"${API_BASE_URL}/docs"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"OpenAPI spec"}),": ",(0,s.jsx)(n.code,{children:"${API_BASE_URL}/openapi.json"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"These provide the most current documentation for your deployed version."}),"\n",(0,s.jsx)(n.h3,{id:"user-management-apis",children:"User Management APIs"}),"\n",(0,s.jsx)(n.h4,{id:"list-all-users",children:"List All Users"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -H "Authorization: Bearer $JWT_TOKEN" \\\n     "${API_BASE_URL}/users"\n'})}),"\n",(0,s.jsx)(n.h4,{id:"create-a-new-user",children:"Create a New User"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X POST \\\n     -H "Authorization: Bearer $JWT_TOKEN" \\\n     -H "Content-Type: application/json" \\\n     -d \'{\n       "email": "john.doe@example.com",\n       "role": "member",\n       "ssh_key_id": null\n     }\' \\\n     "${API_BASE_URL}/users"\n'})}),"\n",(0,s.jsx)(n.h4,{id:"get-current-user-information",children:"Get Current User Information"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -H "Authorization: Bearer $JWT_TOKEN" \\\n     "${API_BASE_URL}/users/me"\n'})}),"\n",(0,s.jsx)(n.h4,{id:"update-user-information",children:"Update User Information"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X PUT \\\n     -H "Authorization: Bearer $JWT_TOKEN" \\\n     -H "Content-Type: application/json" \\\n     -d \'{\n       "email": "john.smith@example.com",\n       "role": "operator",\n       "ssh_key_id": null\n     }\' \\\n     "${API_BASE_URL}/users/{user_id}"\n'})}),"\n",(0,s.jsx)(n.h4,{id:"delete-a-user",children:"Delete a User"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X DELETE \\\n     -H "Authorization: Bearer $JWT_TOKEN" \\\n     "${API_BASE_URL}/users/{user_id}"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"tenant-management-apis",children:"Tenant Management APIs"}),"\n",(0,s.jsx)(n.h4,{id:"list-all-tenants",children:"List All Tenants"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -H "Authorization: Bearer $JWT_TOKEN" \\\n     "${API_BASE_URL}/tenants"\n'})}),"\n",(0,s.jsx)(n.h4,{id:"create-a-new-tenant",children:"Create a New Tenant"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X POST \\\n     -H "Authorization: Bearer $JWT_TOKEN" \\\n     -H "Content-Type: application/json" \\\n     -d \'{\n       "name": "development-team",\n       "users": []\n     }\' \\\n     "${API_BASE_URL}/tenants"\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note"}),": Each user can belong to only one tenant at a time. When assigning users during tenant creation, you must provide their WireGuard public key for VPN access."]}),"\n",(0,s.jsx)(n.h4,{id:"delete-a-tenant",children:"Delete a Tenant"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X DELETE \\\n     -H "Authorization: Bearer $JWT_TOKEN" \\\n     "${API_BASE_URL}/tenants/{tenant_id}"\n'})}),"\n",(0,s.jsx)(n.h4,{id:"add-user-to-tenant",children:"Add User to Tenant"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X PUT \\\n     -H "Authorization: Bearer $JWT_TOKEN" \\\n     -H "Content-Type: application/json" \\\n     -d \'{\n       "pubkey": "user-wireguard-public-key"\n     }\' \\\n     "${API_BASE_URL}/tenants/{tenant_id}/users/{user_id}"\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note"}),": You must provide the user's WireGuard public key to configure VPN access. Each user can belong to only one tenant at a time."]}),"\n",(0,s.jsx)(n.h4,{id:"remove-user-from-tenant",children:"Remove User from Tenant"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X DELETE \\\n     -H "Authorization: Bearer $JWT_TOKEN" \\\n     "${API_BASE_URL}/tenants/{tenant_id}/users/{user_id}"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"common-use-cases-and-workflows",children:"Common Use Cases and Workflows"}),"\n",(0,s.jsx)(n.h3,{id:"use-case-1-create-a-new-user-and-add-to-existing-tenant",children:"Use Case 1: Create a New User and Add to Existing Tenant"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Scenario"}),": A new employee joins and needs access to an existing project."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Workflow"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Create a new user account"}),"\n",(0,s.jsx)(n.li,{children:"Add the user to existing tenant"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Step 1: Create the user\ncurl -X POST \\\n  -H "Authorization: Bearer $JWT_TOKEN" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "email": "alice.smith@company.com",\n    "role": "member",\n    "ssh_key_id": null\n  }\' \\\n  ${API_BASE_URL}/users\n\n# Step 2: List tenants to find the target tenant ID\ncurl -H "Authorization: Bearer $JWT_TOKEN" \\\n     ${API_BASE_URL}/tenants\n\n# Step 3: Add user to tenant (replace USER_ID, TENANT_ID, and PUBKEY with actual values)\ncurl -X PUT \\\n  -H "Authorization: Bearer $JWT_TOKEN" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "pubkey": "WIREGUARD_PUBLIC_KEY"\n  }\' \\\n  ${API_BASE_URL}/tenants/TENANT_ID/users/USER_ID\n'})}),"\n",(0,s.jsx)(n.h3,{id:"use-case-2-move-user-between-tenants",children:"Use Case 2: Move User Between Tenants"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Scenario"}),": Moving a user from one project team to another."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Workflow"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Remove user from old tenant"}),"\n",(0,s.jsx)(n.li,{children:"Add user to new tenant"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Step 1: Remove from old tenant\ncurl -X DELETE \\\n     -H "Authorization: Bearer $JWT_TOKEN" \\\n     ${API_BASE_URL}/tenants/OLD_TENANT_ID/users/USER_ID\n\n# Step 2: Add to new tenant\ncurl -X PUT \\\n     -H "Authorization: Bearer $JWT_TOKEN" \\\n     ${API_BASE_URL}/tenants/NEW_TENANT_ID/users/USER_ID\n     -H "Content-Type: application/json" \\\n     -d \'{\n       "pubkey": "WIREGUARD_PUBLIC_KEY"\n     }\' \\\n     ${API_BASE_URL}/tenants/NEW_TENANT_ID/users/USER_ID\n'})}),"\n",(0,s.jsx)(n.h3,{id:"use-case-3-create-new-project-with-team",children:"Use Case 3: Create New Project with Team"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Scenario"}),": Setting up a new project with a dedicated team."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Workflow"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Create new tenant for the project with team members"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Create project tenant with team members at once\ncurl -X POST \\\n  -H "Authorization: Bearer $JWT_TOKEN" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "name": "project-alpha",\n    "users": [\n      {"user_id": "USER_ID_1", "pubkey": "WIREGUARD_PUBLIC_KEY_1"},\n      {"user_id": "USER_ID_2", "pubkey": "WIREGUARD_PUBLIC_KEY_2"}\n    ]\n  }\' \\\n  ${API_BASE_URL}/tenants\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note"}),": You can also add users to existing tenants later:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X PUT \\\n  -H "Authorization: Bearer $JWT_TOKEN" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "pubkey": "WIREGUARD_PUBLIC_KEY"\n  }\' \\\n  ${API_BASE_URL}/tenants/PROJECT_TENANT_ID/users/ADDITIONAL_USER_ID\n'})}),"\n",(0,s.jsx)(n.h3,{id:"use-case-4-employee-offboarding",children:"Use Case 4: Employee Offboarding"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Scenario"}),": An employee is leaving and needs to be removed from all systems."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Workflow"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"List all tenants to identify user memberships (optional, for verification)"}),"\n",(0,s.jsx)(n.li,{children:"Delete the user account (automatically removes from all tenants)"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Step 1: Check current tenants (optional, for verification)\ncurl -H "Authorization: Bearer $JWT_TOKEN" \\\n     ${API_BASE_URL}/tenants\n\n# Step 2: Delete the user (automatically removes from all tenants)\ncurl -X DELETE \\\n     -H "Authorization: Bearer $JWT_TOKEN" \\\n     ${API_BASE_URL}/users/USER_ID\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note"}),": When you delete a user, the system automatically removes that user from all tenants to which they belong. There's no need for manual removal from each tenant."]}),"\n",(0,s.jsx)(n.h3,{id:"use-case-5-update-user-role",children:"Use Case 5: Update User Role"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Scenario"}),": Promoting a user from member to operator."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Workflow"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Get current user information"}),"\n",(0,s.jsx)(n.li,{children:"Update user role"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Step 1: Check current user details\ncurl -H "Authorization: Bearer $JWT_TOKEN" \\\n     ${API_BASE_URL}/users\n\n# Step 2: Update user role\ncurl -X PUT \\\n     -H "Authorization: Bearer $JWT_TOKEN" \\\n     -H "Content-Type: application/json" \\\n     -d \'{\n       "email": "user@company.com",\n       "role": "operator",\n       "ssh_key_id": null\n     }\' \\\n     ${API_BASE_URL}/users/USER_ID\n'})})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453(e,n,r){r.d(n,{R:()=>o,x:()=>i});var t=r(6540);const s={},a=t.createContext(s);function o(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);