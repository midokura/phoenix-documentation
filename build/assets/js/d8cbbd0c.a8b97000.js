"use strict";(globalThis.webpackChunkfoo=globalThis.webpackChunkfoo||[]).push([[1909],{2477(e,n,i){i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"service-operator/GHCR_AUTHENTICATION","title":"GitHub Container Registry (GHCR) Authentication","description":"Authentication setup for GitHub Container Registry.","source":"@site/versioned_docs/version-v1.0/service-operator/GHCR_AUTHENTICATION.md","sourceDirName":"service-operator","slug":"/service-operator/GHCR_AUTHENTICATION","permalink":"/foo/docs/v1.0/service-operator/GHCR_AUTHENTICATION","draft":false,"unlisted":false,"tags":[],"version":"v1.0","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Deployment Scripts","permalink":"/foo/docs/v1.0/service-operator/DEPLOYMENT"},"next":{"title":"Google SSO Setup Guide","permalink":"/foo/docs/v1.0/service-operator/GOOGLE_SSO_SETUP"}}');var t=i(4848),o=i(8453);const s={},c="GitHub Container Registry (GHCR) Authentication",l={},a=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Creating a Personal Access Token (PAT)",id:"creating-a-personal-access-token-pat",level:2},{value:"Authentication",id:"authentication",level:2},{value:"Add to your inventory.yml",id:"add-to-your-inventoryyml",level:3},{value:"Docker/Podman Direct Login",id:"dockerpodman-direct-login",level:3},{value:"Verifying Authentication",id:"verifying-authentication",level:2},{value:"Token Storage Location",id:"token-storage-location",level:2},{value:"Security Best Practices",id:"security-best-practices",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"&quot;unauthorized: authentication required&quot; Error",id:"unauthorized-authentication-required-error",level:3},{value:"&quot;denied: permission denied&quot; Error",id:"denied-permission-denied-error",level:3},{value:"Token Not Working After Creation",id:"token-not-working-after-creation",level:3},{value:"Logout",id:"logout",level:2},{value:"Additional Resources",id:"additional-resources",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"github-container-registry-ghcr-authentication",children:"GitHub Container Registry (GHCR) Authentication"})}),"\n",(0,t.jsx)(n.p,{children:"Authentication setup for GitHub Container Registry."}),"\n",(0,t.jsx)(n.p,{children:"This guide explains how to authenticate with GitHub Container Registry (ghcr.io) using Docker or Podman."}),"\n",(0,t.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"GitHub account with appropriate repository access"}),"\n",(0,t.jsx)(n.li,{children:"Docker or Podman installed on your system"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"creating-a-personal-access-token-pat",children:"Creating a Personal Access Token (PAT)"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Navigate to GitHub Settings"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Go to ",(0,t.jsx)(n.a,{href:"https://github.com/settings/tokens",children:"https://github.com/settings/tokens"})]}),"\n",(0,t.jsx)(n.li,{children:"Or: Click your profile photo \u2192 Settings \u2192 Developer settings \u2192 Personal access tokens \u2192 Tokens (classic)"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Generate New Token"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'Click "Generate new token" \u2192 "Generate new token (classic)"'}),"\n",(0,t.jsx)(n.li,{children:'Provide a descriptive note (e.g., "GHCR Access for Service Operator")'}),"\n",(0,t.jsx)(n.li,{children:"Set expiration date as needed"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Select Required Scopes"}),"\nFor GHCR access, select at minimum:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"read:packages"})," - Download container images"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Generate and Save Token"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'Click "Generate token"'}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"IMPORTANT"}),": Copy the token immediately - you won't be able to see it again"]}),"\n",(0,t.jsx)(n.li,{children:"Store it securely (password manager recommended)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"authentication",children:"Authentication"}),"\n",(0,t.jsx)(n.h3,{id:"add-to-your-inventoryyml",children:"Add to your inventory.yml"}),"\n",(0,t.jsx)(n.p,{children:"For secure token storage in inventory files:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Encrypt the token using Ansible Vault:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ansible-vault encrypt_string 'ghp_YourToken' --name 'ghcr_pat' --ask-vault-password\n"})}),"\n",(0,t.jsx)(n.p,{children:"You'll be prompted to create a vault password. The command will output encrypted text."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["Add to ",(0,t.jsx)(n.code,{children:"inventory.yml"}),":"]})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'all:\n  vars:\n    iaas_console:\n      ghcr_user: "your-github-username"\n      ghcr_pat: !vault |\n        $ANSIBLE_VAULT;1.1;AES256\n        ... encrypted token ...\n'})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"dockerpodman-direct-login",children:"Docker/Podman Direct Login"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Docker\necho "YOUR_GITHUB_TOKEN" | docker login ghcr.io -u YOUR_GITHUB_USERNAME --password-stdin\n\n# Podman\necho "YOUR_GITHUB_TOKEN" | podman login ghcr.io -u YOUR_GITHUB_USERNAME --password-stdin\n'})}),"\n",(0,t.jsx)(n.h2,{id:"verifying-authentication",children:"Verifying Authentication"}),"\n",(0,t.jsx)(n.p,{children:"Test your authentication by pulling a public image:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Docker\ndocker pull ghcr.io/midokura/gpu-infra-ansible:v0.1\n\n# Podman\npodman pull ghcr.io/midokura/gpu-infra-ansible:v0.1\n"})}),"\n",(0,t.jsx)(n.h2,{id:"token-storage-location",children:"Token Storage Location"}),"\n",(0,t.jsx)(n.p,{children:"Credentials are stored in:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Docker"}),": ",(0,t.jsx)(n.code,{children:"~/.docker/config.json"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Podman"}),": ",(0,t.jsx)(n.code,{children:"${XDG_RUNTIME_DIR}/containers/auth.json"})," or ",(0,t.jsx)(n.code,{children:"~/.config/containers/auth.json"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use Fine-Grained Tokens"}),": Consider using fine-grained personal access tokens for better security control"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Set Expiration Dates"}),": Don't create tokens that never expire"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Rotate Tokens"}),": Regularly rotate your tokens"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Limit Scope"}),": Only grant the minimum required permissions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Secure Storage"}),": Never commit tokens to version control"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use Environment Variables"}),": Store tokens in environment variables or secret management systems"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"unauthorized-authentication-required-error",children:'"unauthorized: authentication required" Error'}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Verify token has correct scopes (",(0,t.jsx)(n.code,{children:"read:packages"})," at minimum)"]}),"\n",(0,t.jsx)(n.li,{children:"Check token hasn't expired"}),"\n",(0,t.jsx)(n.li,{children:"Ensure correct username and token are used"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"denied-permission-denied-error",children:'"denied: permission denied" Error'}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Verify you have access to the repository"}),"\n",(0,t.jsx)(n.li,{children:"Check if the package/image exists and is accessible"}),"\n",(0,t.jsx)(n.li,{children:"Confirm token has necessary permissions for the operation"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"token-not-working-after-creation",children:"Token Not Working After Creation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Wait a few minutes - token activation can take time"}),"\n",(0,t.jsx)(n.li,{children:"Try logging out and logging back in"}),"\n",(0,t.jsx)(n.li,{children:"Verify you copied the entire token string"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"logout",children:"Logout"}),"\n",(0,t.jsx)(n.p,{children:"When done or to clear credentials:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Docker\ndocker logout ghcr.io\n\n# Podman\npodman logout ghcr.io\n"})}),"\n",(0,t.jsx)(n.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-container-registry",children:"GitHub Container Registry Documentation"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens",children:"Managing Personal Access Tokens"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>s,x:()=>c});var r=i(6540);const t={},o=r.createContext(t);function s(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);