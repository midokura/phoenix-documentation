"use strict";(globalThis.webpackChunkfoo=globalThis.webpackChunkfoo||[]).push([[7652],{7174(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"service-operator/IAAS_CONSOLE_CONFIGURATION","title":"IaaS Console Configuration","description":"This document explains the JSON configuration for the IaaS Console API Helm Chart.","source":"@site/versioned_docs/version-v1.3/service-operator/IAAS_CONSOLE_CONFIGURATION.md","sourceDirName":"service-operator","slug":"/service-operator/IAAS_CONSOLE_CONFIGURATION","permalink":"/phoenix-documentation/docs/v1.3/service-operator/IAAS_CONSOLE_CONFIGURATION","draft":false,"unlisted":false,"tags":[],"version":"v1.3","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Google SSO Setup Guide","permalink":"/phoenix-documentation/docs/v1.3/service-operator/GOOGLE_SSO_SETUP"},"next":{"title":"Ironic Baremetal Node Creation","permalink":"/phoenix-documentation/docs/v1.3/service-operator/INSTALL_BAREMETAL_NODE"}}');var o=s(4848),i=s(8453);const t={},a="IaaS Console Configuration",l={},c=[{value:"Configuration Sections",id:"configuration-sections",level:2},{value:"1. User Tenant Map",id:"1-user-tenant-map",level:3},{value:"2. Flavors",id:"2-flavors",level:3},{value:"3. Images",id:"3-images",level:3},{value:"4. Networks",id:"4-networks",level:3},{value:"5. Hedgehog Kubeconfig",id:"5-hedgehog-kubeconfig",level:3},{value:"Setup Workflow",id:"setup-workflow",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"iaas-console-configuration",children:"IaaS Console Configuration"})}),"\n",(0,o.jsx)(n.p,{children:"This document explains the JSON configuration for the IaaS Console API Helm Chart."}),"\n",(0,o.jsx)(n.h2,{id:"configuration-sections",children:"Configuration Sections"}),"\n",(0,o.jsx)(n.h3,{id:"1-user-tenant-map",children:"1. User Tenant Map"}),"\n",(0,o.jsx)(n.p,{children:"Defines user access and roles. Use this to bootstrap initial operators."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Structure"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'"user_email@example.com": {\n  "tenant": "demo-project-tenant-A",\n  "role": "operator|member"\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Fields"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Email"})," (key): User's email address"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"tenant"}),": Tenant/project name"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"role"}),": Permission level","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"operator"}),": Can manage users through the API"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"member"}),": Standard user access"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Note"}),": After initial setup, operators can manage users via the API without editing this file."]}),"\n",(0,o.jsx)(n.h3,{id:"2-flavors",children:"2. Flavors"}),"\n",(0,o.jsx)(n.p,{children:"Defines available VM instance types."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Structure"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "display_name": "Human-readable name",\n  "ost_name": "openstack-flavor-name",\n  "node_type": "baremetal"\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Fields"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"display_name"}),": Name shown in UI"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"ost_name"}),": OpenStack flavor name"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"node_type"}),': Optional (e.g., "baremetal" for physical servers)']}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"3-images",children:"3. Images"}),"\n",(0,o.jsx)(n.p,{children:"Defines available OS images for VMs."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Structure"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "display_name": "Human-readable name",\n  "ost_name": "openstack-image-name"\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Fields"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"display_name"}),": Name shown in UI"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"ost_name"}),": OpenStack/Glance image name"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"4-networks",children:"4. Networks"}),"\n",(0,o.jsx)(n.p,{children:"Defines available networks for VMs."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Structure"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "display_name": "Human-readable name",\n  "ost_name": "openstack-network-name"\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Fields"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"display_name"}),": Name shown in UI"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"ost_name"}),": OpenStack/Neutron network name"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"5-hedgehog-kubeconfig",children:"5. Hedgehog Kubeconfig"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"hedgehog_kubeconfig_b64"})," in the inventory allows the IaaS Console to interact with the Hedgehog Kubernetes cluster. It must be provided as a base64-encoded kubeconfig containing the public IP of the control node."]}),"\n",(0,o.jsx)(n.p,{children:"Steps to generate:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"# Connect to the control node\nssh core@control-1.bcn\n\n# Get the public IP of eth0 (used to access the cluster from IaaS)\nIP=$(ip -4 addr show eth0 | grep inet | awk '{print $2}' | cut -d/ -f1)\n\n# Generate base64-encoded kubeconfig with public IP\nkubectl config view --flatten \\\n  | sed \"s#server: https://127.0.0.1:6443#server: https://$IP:6443#\" \\\n  | base64 -w0\n"})}),"\n",(0,o.jsx)(n.h2,{id:"setup-workflow",children:"Setup Workflow"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Configure flavors, images, and networks for tenant use"}),"\n",(0,o.jsxs)(n.li,{children:["Edit ",(0,o.jsx)(n.code,{children:"user_tenant_map"})," to add initial operators"]}),"\n",(0,o.jsxs)(n.li,{children:["Configure ",(0,o.jsx)(n.code,{children:"hedgehog_kubeconfig_b64"})," in the inventory"]}),"\n",(0,o.jsx)(n.li,{children:"Provision IaaS Console (ansible playbook)"}),"\n",(0,o.jsxs)(n.li,{children:["Operators log in and manage users via the ",(0,o.jsx)(n.a,{href:"/phoenix-documentation/docs/v1.3/service-operator/OPERATOR_API_GUIDE",children:"Operator API"})]}),"\n",(0,o.jsx)(n.li,{children:"Users create VMs by selecting from available resources"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>t,x:()=>a});var r=s(6540);const o={},i=r.createContext(o);function t(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);