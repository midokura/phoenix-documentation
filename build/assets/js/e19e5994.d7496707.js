"use strict";(globalThis.webpackChunkfoo=globalThis.webpackChunkfoo||[]).push([[9782],{8178(e,n,r){r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"service-operator/INSTALL_BAREMETAL_NODE","title":"Bare-Metal Node Enrollment and Server Creation","description":"This guide describes how operators enroll bare-metal nodes in the IaaS Console and how users create bare-metal servers using those enrolled nodes. No command-line steps are required.","source":"@site/versioned_docs/version-v1.5/service-operator/INSTALL_BAREMETAL_NODE.md","sourceDirName":"service-operator","slug":"/service-operator/INSTALL_BAREMETAL_NODE","permalink":"/foo/docs/service-operator/INSTALL_BAREMETAL_NODE","draft":false,"unlisted":false,"tags":[],"version":"v1.5","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"IaaS Console Configuration","permalink":"/foo/docs/service-operator/IAAS_CONSOLE_CONFIGURATION"},"next":{"title":"Network Control Node Setup","permalink":"/foo/docs/service-operator/NETWORK_CONTROL_NODE_SETUP"}}');var s=r(4848),t=r(8453);const o={},a="Bare-Metal Node Enrollment and Server Creation",l={},c=[{value:"IaaS Configuration",id:"iaas-configuration",level:3},{value:"Operator: Enroll a Bare-Metal Node",id:"operator-enroll-a-bare-metal-node",level:2},{value:"Users: Create a Bare-Metal Server",id:"users-create-a-bare-metal-server",level:2},{value:"Optional: Provide a User Script",id:"optional-provide-a-user-script",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Enrollment Lifecycle",id:"enrollment-lifecycle",level:2},{value:"Image and Placement Guidance",id:"image-and-placement-guidance",level:2},{value:"User Scripts: Examples and Behavior",id:"user-scripts-examples-and-behavior",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"bare-metal-node-enrollment-and-server-creation",children:"Bare-Metal Node Enrollment and Server Creation"})}),"\n",(0,s.jsx)(n.p,{children:"This guide describes how operators enroll bare-metal nodes in the IaaS Console and how users create bare-metal servers using those enrolled nodes. No command-line steps are required."}),"\n",(0,s.jsx)(n.h3,{id:"iaas-configuration",children:"IaaS Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"os_rabbitmq_url"})," variable in the inventory is used by the IaaS Console to communicate with Ironic, enabling the migration of baremetal nodes from the provision VPC to a tenant VPC."]}),"\n",(0,s.jsx)(n.p,{children:"To retrieve the RabbitMQ URL:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"ssh control0\ngrep /etc/kolla/ironic-api/ironic.conf -Fe 'rabbit://'\n"})}),"\n",(0,s.jsx)(n.h2,{id:"operator-enroll-a-bare-metal-node",children:"Operator: Enroll a Bare-Metal Node"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Access IaaS Console:"})," Sign in with an operator account."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Enroll the node:"})," Use the node enrollment workflow to register the hardware. Once submitted, the platform will automatically start the enrollment process."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Wait for Active state:"})," The system will progress through enrollment stages. When completed, the node\u2019s status changes to ",(0,s.jsx)(n.strong,{children:"Active"}),", indicating it is ready to host bare-metal servers."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"users-create-a-bare-metal-server",children:"Users: Create a Bare-Metal Server"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Open Servers panel:"})," In the IaaS Console, go to ",(0,s.jsx)(n.strong,{children:"Servers"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Start creation:"})," Select ",(0,s.jsx)(n.strong,{children:"+ Create Server"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Choose server type:"})," Pick ",(0,s.jsx)(n.strong,{children:"Bare Metal"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Select image:"})," Choose the operating system image required for your workload."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"optional-provide-a-user-script",children:"Optional: Provide a User Script"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Upload script:"})," During server creation, you can attach a user script to customize initialization."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Script types:"})," Depending on the selected operating system, you may provide:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["A ",(0,s.jsx)(n.strong,{children:"bash"})," script"]}),"\n",(0,s.jsxs)(n.li,{children:["A ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://cloud-init.io/",children:"cloud-init"})})," configuration"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Behavior:"})," The platform applies the script during provisioning to configure packages, users, networking, and other initialization tasks supported by the chosen OS."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Once the request is submitted, the platform provisions the bare-metal server on an Active node, applies any provided user script, and makes the instance available in the ",(0,s.jsx)(n.strong,{children:"Servers"})," panel."]}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Operator role:"})," You must have operator permissions in the IaaS Console to enroll hardware."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Hardware readiness:"})," Ensure out-of-band management (BMC/IPMI or Redfish) is reachable and configured. Verify power, networking (PXE-capable NIC), and rack connectivity."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Network placement:"})," Confirm the node is cabled to the provisioning network and the intended tenant networks according to your site design."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Images availability:"})," Required OS images must be available in the catalog. See ",(0,s.jsx)(n.a,{href:"/foo/docs/service-operator/IAAS_CONSOLE_CONFIGURATION",children:"service-operator/IAAS_CONSOLE_CONFIGURATION.md"})," for image management."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"enrollment-lifecycle",children:"Enrollment Lifecycle"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Enroll:"})," Operator registers the node via the Console. The platform validates management access."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Inspectable/Discovery:"})," Hardware characteristics are detected (CPU, RAM, disks, NICs)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Clean/Prepare:"})," The node is sanitized and prepared for deployment."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Active:"})," Node is ready to host bare-metal servers."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Typical enrollment completes within minutes, depending on hardware and network speed. If the node remains pending for an extended period, see Troubleshooting."}),"\n",(0,s.jsx)(n.h2,{id:"image-and-placement-guidance",children:"Image and Placement Guidance"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Sizing:"})," Choose images compatible with the server\u2019s firmware boot mode (UEFI/BIOS) and storage layout."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Placement:"})," The scheduler selects an Active node meeting resource and network constraints. If capacity is unavailable, creation is queued or fails."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"user-scripts-examples-and-behavior",children:"User Scripts: Examples and Behavior"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Execution timing:"})," Scripts run during provisioning and first boot, before the server is marked ready."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Supported formats:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Bash: Inline boot-time customization."}),"\n",(0,s.jsx)(n.li,{children:"Cloud-init: Declarative initialization for Linux distributions supporting cloud-init."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example (cloud-init):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'#cloud-config\nusers:\n  - name: appuser\n    ssh-authorized-keys:\n      - ssh-rsa AAAA... your-key\nruncmd:\n  - echo "hello from cloud-init" > /var/tmp/init.txt\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example (bash):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'#!/usr/bin/env bash\nset -euo pipefail\necho "hello from bash" > /var/tmp/init.txt\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Common pitfalls:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Mismatched OS and script type (e.g., cloud-init on images without cloud-init)."}),"\n",(0,s.jsx)(n.li,{children:"Using interactive commands or waiting for user input in scripts."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Node stuck enrolling:"})," Verify BMC credentials, management network reachability, and that the console shows no hardware errors."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Server creation fails:"})," Check that at least one node is in Active state and that the selected image is compatible with the hardware."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453(e,n,r){r.d(n,{R:()=>o,x:()=>a});var i=r(6540);const s={},t=i.createContext(s);function o(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);