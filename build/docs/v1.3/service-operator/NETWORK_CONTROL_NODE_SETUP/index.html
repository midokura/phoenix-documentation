<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-v1.3 docs-doc-page docs-doc-id-service-operator/NETWORK_CONTROL_NODE_SETUP" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Network Control Node Setup | Midokura Phoenix</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://midokura.github.io/phoenix-documentation/img/phoenix.svg"><meta data-rh="true" name="twitter:image" content="https://midokura.github.io/phoenix-documentation/img/phoenix.svg"><meta data-rh="true" property="og:url" content="https://midokura.github.io/phoenix-documentation/docs/v1.3/service-operator/NETWORK_CONTROL_NODE_SETUP"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="v1.3"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v1.3"><meta data-rh="true" name="docsearch:version" content="v1.3"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v1.3"><meta data-rh="true" property="og:title" content="Network Control Node Setup | Midokura Phoenix"><meta data-rh="true" name="description" content="This guide walks you through provisioning the control node that manages the network fabric, then installing SONiC on the switches."><meta data-rh="true" property="og:description" content="This guide walks you through provisioning the control node that manages the network fabric, then installing SONiC on the switches."><link data-rh="true" rel="icon" href="/phoenix-documentation/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://midokura.github.io/phoenix-documentation/docs/v1.3/service-operator/NETWORK_CONTROL_NODE_SETUP"><link data-rh="true" rel="alternate" href="https://midokura.github.io/phoenix-documentation/docs/v1.3/service-operator/NETWORK_CONTROL_NODE_SETUP" hreflang="en"><link data-rh="true" rel="alternate" href="https://midokura.github.io/phoenix-documentation/docs/v1.3/service-operator/NETWORK_CONTROL_NODE_SETUP" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Service Operator","item":"https://midokura.github.io/phoenix-documentation/docs/v1.3/category/service-operator"},{"@type":"ListItem","position":2,"name":"Network Control Node Setup","item":"https://midokura.github.io/phoenix-documentation/docs/v1.3/service-operator/NETWORK_CONTROL_NODE_SETUP"}]}</script><link rel="alternate" type="application/rss+xml" href="/phoenix-documentation/blog/rss.xml" title="Midokura Phoenix RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/phoenix-documentation/blog/atom.xml" title="Midokura Phoenix Atom Feed"><link rel="stylesheet" href="/phoenix-documentation/assets/css/styles.35836ae5.css">
<script src="/phoenix-documentation/assets/js/runtime~main.7e9489e6.js" defer="defer"></script>
<script src="/phoenix-documentation/assets/js/main.90b35325.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/phoenix-documentation/img/logo.png"><link rel="preload" as="image" href="/phoenix-documentation/img/logo-midokura.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/phoenix-documentation/"><div class="navbar__logo"><img src="/phoenix-documentation/img/logo.png" alt="Midokura Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/phoenix-documentation/img/logo.png" alt="Midokura Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Phoenix Documentation</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/phoenix-documentation/docs/v1.3/category/service-operator">Docs</a><a class="navbar__item navbar__link" href="/phoenix-documentation/blog">Release Notes</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" sidebarid="tutorialSidebar" href="/phoenix-documentation/docs/v1.3/service-operator/NETWORK_CONTROL_NODE_SETUP">v1.3</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/phoenix-documentation/docs/service-operator/NETWORK_CONTROL_NODE_SETUP">v1.5</a></li><li><a class="dropdown__link" href="/phoenix-documentation/docs/v1.4/service-operator/NETWORK_CONTROL_NODE_SETUP">v1.4</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/phoenix-documentation/docs/v1.3/service-operator/NETWORK_CONTROL_NODE_SETUP">v1.3</a></li><li><a class="dropdown__link" href="/phoenix-documentation/docs/v1.2/service-operator/NETWORK_CONTROL_NODE_SETUP">v1.2</a></li><li><a class="dropdown__link" href="/phoenix-documentation/docs/v1.1/service-operator/NETWORK_CONTROL_NODE_SETUP">v1.1</a></li><li><a class="dropdown__link" href="/phoenix-documentation/docs/v1.0/service-operator/NETWORK_CONTROL_NODE_SETUP">v1.0</a></li></ul></div><a href="https://github.com/jimken-mido/foo" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/phoenix-documentation/docs/v1.3/category/service-operator"><span title="Service Operator" class="categoryLinkLabel_W154">Service Operator</span></a><button aria-label="Collapse sidebar category &#x27;Service Operator&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/phoenix-documentation/docs/v1.3/service-operator/intro"><span title="Service Operator Documentation" class="linkLabel_WmDU">Service Operator Documentation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/phoenix-documentation/docs/v1.3/service-operator/CEPH_SETUP"><span title="Setup Ceph - Generic" class="linkLabel_WmDU">Setup Ceph - Generic</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/phoenix-documentation/docs/v1.3/service-operator/DEPLOYMENT"><span title="Deployment Scripts" class="linkLabel_WmDU">Deployment Scripts</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/phoenix-documentation/docs/v1.3/service-operator/GHCR_AUTHENTICATION"><span title="GitHub Container Registry (GHCR) Authentication" class="linkLabel_WmDU">GitHub Container Registry (GHCR) Authentication</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/phoenix-documentation/docs/v1.3/service-operator/GOOGLE_SSO_SETUP"><span title="Google SSO Setup Guide" class="linkLabel_WmDU">Google SSO Setup Guide</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/phoenix-documentation/docs/v1.3/service-operator/IAAS_CONSOLE_CONFIGURATION"><span title="IaaS Console Configuration" class="linkLabel_WmDU">IaaS Console Configuration</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/phoenix-documentation/docs/v1.3/service-operator/INSTALL_BAREMETAL_NODE"><span title="Ironic Baremetal Node Creation" class="linkLabel_WmDU">Ironic Baremetal Node Creation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/phoenix-documentation/docs/v1.3/service-operator/NETWORK_CONTROL_NODE_SETUP"><span title="Network Control Node Setup" class="linkLabel_WmDU">Network Control Node Setup</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/phoenix-documentation/docs/v1.3/service-operator/OBSERVABILITY_ALERTS"><span title="Observability Alerts" class="linkLabel_WmDU">Observability Alerts</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/phoenix-documentation/docs/v1.3/service-operator/OBSERVABILITY_DASHBOARDS"><span title="Observability Dashboards" class="linkLabel_WmDU">Observability Dashboards</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/phoenix-documentation/docs/v1.3/service-operator/OPERATOR_API_GUIDE"><span title="Operator API Usage Guide" class="linkLabel_WmDU">Operator API Usage Guide</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/phoenix-documentation/docs/v1.3/service-operator/OS_REQUIREMENTS"><span title="OS Requirements" class="linkLabel_WmDU">OS Requirements</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/phoenix-documentation/docs/v1.3/service-operator/VPN_CONFIGURATION"><span title="VPN Configuration for Tenant Users" class="linkLabel_WmDU">VPN Configuration for Tenant Users</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Midokura Phoenix<!-- --> <b>v1.3</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/phoenix-documentation/docs/service-operator/NETWORK_CONTROL_NODE_SETUP">latest version</a></b> (<!-- -->v1.5<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/phoenix-documentation/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/phoenix-documentation/docs/v1.3/category/service-operator"><span>Service Operator</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Network Control Node Setup</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v1.3</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Network Control Node Setup</h1></header>
<p>This guide walks you through provisioning the control node that manages the network fabric, then installing SONiC on the switches.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-youre-doing">What You&#x27;re Doing<a href="#what-youre-doing" class="hash-link" aria-label="Direct link to What You&#x27;re Doing" title="Direct link to What You&#x27;re Doing" translate="no">​</a></h2>
<p>You&#x27;ll deploy a VM on the bastion node that acts as the control plane for the HedgeHog network fabric. This control node will then manage the installation and configuration of SONiC on your network switches. The fabric configuration and wiring are pre-baked into the installer ISO.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="before-you-start">Before You Start<a href="#before-you-start" class="hash-link" aria-label="Direct link to Before You Start" title="Direct link to Before You Start" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="prerequisites-checklist">Prerequisites Checklist<a href="#prerequisites-checklist" class="hash-link" aria-label="Direct link to Prerequisites Checklist" title="Direct link to Prerequisites Checklist" translate="no">​</a></h3>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> <strong>Bastion Node Access</strong> - SSH access to bastion node → <a href="#bastion-node-access" class="">Details</a></li>
<li class="task-list-item"><input type="checkbox" disabled=""> <strong>Control Node ISO</strong> - Download URL for HedgeHog Control node ISO → <a href="#control-node-iso" class="">Details</a></li>
<li class="task-list-item"><input type="checkbox" disabled=""> <strong>Switch Access</strong> - Serial console access to network switches → <a href="#switch-access" class="">Details</a></li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="bastion-node-access">Bastion Node Access<a href="#bastion-node-access" class="hash-link" aria-label="Direct link to Bastion Node Access" title="Direct link to Bastion Node Access" translate="no">​</a></h3>
<ul>
<li class=""><strong>What it is:</strong> SSH access to the bastion/jump host where the control VM will run</li>
<li class=""><strong>Purpose:</strong> Deploy and manage the network control node</li>
<li class=""><strong>What you need:</strong>
<ul>
<li class="">SSH key and credentials</li>
<li class="">Sufficient resources on bastion: 8-12 vCPU, 16 GiB RAM, 35 GB disk space for the control VM</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="control-node-iso">Control Node ISO<a href="#control-node-iso" class="hash-link" aria-label="Direct link to Control Node ISO" title="Direct link to Control Node ISO" translate="no">​</a></h3>
<ul>
<li class=""><strong>What it is:</strong> Pre-built installer ISO for the network control node</li>
<li class=""><strong>Purpose:</strong> Contains the HedgeHog control plane with pre-configured fabric settings and wiring</li>
<li class=""><strong>What you need:</strong> Download (Azure Blob Storage) URL previously provided</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="switch-access">Switch Access<a href="#switch-access" class="hash-link" aria-label="Direct link to Switch Access" title="Direct link to Switch Access" translate="no">​</a></h3>
<ul>
<li class=""><strong>What it is:</strong> Serial console access to SONiC-compatible network switches</li>
<li class=""><strong>Purpose:</strong> Boot switches into ONIE for SONiC installation</li>
<li class=""><strong>How to access:</strong>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo minicom -D /dev/ttyUSB1 -b 115200</span><br></span></code></pre></div></div>
</li>
<li class=""><strong>What you need:</strong> Physical serial connection to switches</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="installation-steps">Installation Steps<a href="#installation-steps" class="hash-link" aria-label="Direct link to Installation Steps" title="Direct link to Installation Steps" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-1-download-control-node-iso">Step 1: Download Control Node ISO<a href="#step-1-download-control-node-iso" class="hash-link" aria-label="Direct link to Step 1: Download Control Node ISO" title="Direct link to Step 1: Download Control Node ISO" translate="no">​</a></h3>
<p>On the bastion node, download the pre-built ISO:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Use the SAS URL from your materials PDF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget -O hedgehog-installer.iso &quot;https://your-storage-account.blob.core.windows.net/path/to/hedgehog-installer.iso?sp=r&amp;st=...&quot;</span><br></span></code></pre></div></div>
<p>Verify the download:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ls -lh hedgehog-installer.iso</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-2-create-control-vm-on-bastion">Step 2: Create Control VM on Bastion<a href="#step-2-create-control-vm-on-bastion" class="hash-link" aria-label="Direct link to Step 2: Create Control VM on Bastion" title="Direct link to Step 2: Create Control VM on Bastion" translate="no">​</a></h3>
<p>Create and start the control node VM using the ISO. The control node requires:</p>
<ul>
<li class=""><strong>vCPU:</strong> 8-12 cores</li>
<li class=""><strong>RAM:</strong> 16 GiB</li>
<li class=""><strong>Disk:</strong> 35 GB</li>
</ul>
<p>Set up variables for your environment:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Adjust these paths and names for your environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IMG_DIR=/var/lib/libvirt/images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VM_NAME=hedgehog-control</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UBNT_REL_YEAR=&quot;24.04&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VM_VCPU=8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VM_RAM=16384</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ROOTFS_SIZE=35G</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Adjust these for your network setup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VM_MAC=52:54:00:a1:ac:ff  # Must be unique</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VM_BRIDGE=br-mgmt          # Your management network bridge</span><br></span></code></pre></div></div>
<p>Prepare the blank OS image:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo qemu-img create -f qcow2 ${IMG_DIR}/${VM_NAME}.qcow2 ${ROOTFS_SIZE}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chown -v libvirt-qemu:kvm ${IMG_DIR}/${VM_NAME}.qcow2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chmod -v 664 ${IMG_DIR}/${VM_NAME}.qcow2</span><br></span></code></pre></div></div>
<p>Set permissions on the installer ISO:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Assuming hedgehog-installer.iso is in the same directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chown -v libvirt-qemu:kvm ${IMG_DIR}/hedgehog-installer.iso</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chmod -v 664 ${IMG_DIR}/hedgehog-installer.iso</span><br></span></code></pre></div></div>
<p>Create and start the VM:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">virt-install --name=${VM_NAME} \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --os-variant=ubuntu${UBNT_REL_YEAR} \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --machine q35 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --boot firmware=efi,firmware.feature0.name=secure-boot,firmware.feature0.enabled=no \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --tpm none \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --vcpu=${VM_VCPU} \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ram=${VM_RAM} \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --disk path=${IMG_DIR}/${VM_NAME}.qcow2,bus=virtio \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --cdrom=${IMG_DIR}/hedgehog-installer.iso \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --network bridge=${VM_BRIDGE},mac=${VM_MAC} \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --noautoconsole</span><br></span></code></pre></div></div>
<p><strong>Note:</strong> The exact VM creation method depends on your bastion&#x27;s virtualization setup (KVM/libvirt, VMware, etc.). If you need PCI passthrough for additional network devices, add <code>--host-device=pci_XXXX_XX_XX_X</code> to the command.</p>
<p>The installation process is automated. Monitor progress via console:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">virsh console ${VM_NAME}</span><br></span></code></pre></div></div>
<p>The VM will shut itself down when installation is complete. Once it&#x27;s done, start it:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">virsh start ${VM_NAME}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-3-verify-control-node">Step 3: Verify Control Node<a href="#step-3-verify-control-node" class="hash-link" aria-label="Direct link to Step 3: Verify Control Node" title="Direct link to Step 3: Verify Control Node" translate="no">​</a></h3>
<p>Check that the control node VM is running and accessible:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Check VM status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo virsh list --all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Console into the VM to get IP addresses</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">virsh console ${VM_NAME}</span><br></span></code></pre></div></div>
<p>Once logged in via console, list all IP addresses:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># List all network interfaces and their IPs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ip -br addr show</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Or for more detail</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ip addr show</span><br></span></code></pre></div></div>
<p>Note the IP address(es) and use them to SSH from your workstation if needed:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh core@&lt;control-node-ip&gt;</span><br></span></code></pre></div></div>
<p>Verify HedgeHog services are running:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods -A</span><br></span></code></pre></div></div>
<p>All pods should be in Running state.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-31-apply-the-fabric-configuration-to-hedgehog-control-plane">Step 3.1: Apply the fabric configuration to HedgeHog Control Plane<a href="#step-31-apply-the-fabric-configuration-to-hedgehog-control-plane" class="hash-link" aria-label="Direct link to Step 3.1: Apply the fabric configuration to HedgeHog Control Plane" title="Direct link to Step 3.1: Apply the fabric configuration to HedgeHog Control Plane" translate="no">​</a></h4>
<p>On the HedgeHog control node VM, download the pre-configured network fabric configuration:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Use the SAS URL from your materials PDF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget -O hedgehog-fabric-configuration.yaml &quot;https://your-storage-account.blob.core.windows.net/path/to/hedgehog-fabric-configuration.yaml?sp=r&amp;st=...&quot;</span><br></span></code></pre></div></div>
<p>Apply the configuration:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f hedgehog-fabric-configuration.yaml</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-4-prepare-switches-for-sonic-installation">Step 4: Prepare Switches for SONiC Installation<a href="#step-4-prepare-switches-for-sonic-installation" class="hash-link" aria-label="Direct link to Step 4: Prepare Switches for SONiC Installation" title="Direct link to Step 4: Prepare Switches for SONiC Installation" translate="no">​</a></h3>
<p>For each switch, you&#x27;ll set up ONIE to pull the SONiC installer from a temporary HTTP server.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="41-setup-http-server-for-onie">4.1: Setup HTTP Server for ONIE<a href="#41-setup-http-server-for-onie" class="hash-link" aria-label="Direct link to 4.1: Setup HTTP Server for ONIE" title="Direct link to 4.1: Setup HTTP Server for ONIE" translate="no">​</a></h4>
<p>On a machine reachable from the switch management network (can be the bastion):</p>
<p>Create the directory for ONIE files:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p /home/ubuntu/boot-http-server</span><br></span></code></pre></div></div>
<p>Start nginx container to serve ONIE files:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -d --name onie-server \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -p 8080:80 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -v /home/ubuntu/boot-http-server:/usr/share/nginx/html \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nginx</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="42-download-onie-firmware">4.2: Download ONIE Firmware<a href="#42-download-onie-firmware" class="hash-link" aria-label="Direct link to 4.2: Download ONIE Firmware" title="Direct link to 4.2: Download ONIE Firmware" translate="no">​</a></h4>
<p>Download the ONIE image appropriate for your switch model directly to the HTTP server directory:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Download URL will be provided in your materials PDF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Or obtain from your switch vendor&#x27;s support site</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd /home/ubuntu/boot-http-server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget -O onie-updater.bin &quot;https://vendor-url/onie-updater.bin&quot;</span><br></span></code></pre></div></div>
<p><strong>Note:</strong> The exact ONIE firmware filename and version will vary based on your switch hardware. Check your materials PDF for the correct download URL.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="43-access-switch-console">4.3: Access Switch Console<a href="#43-access-switch-console" class="hash-link" aria-label="Direct link to 4.3: Access Switch Console" title="Direct link to 4.3: Access Switch Console" translate="no">​</a></h4>
<p>Connect to each switch via serial console:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo minicom -D /dev/ttyUSB1 -b 115200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># (adjust device path for each switch)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="44-update-onie-firmware">4.4: Update ONIE Firmware<a href="#44-update-onie-firmware" class="hash-link" aria-label="Direct link to 4.4: Update ONIE Firmware" title="Direct link to 4.4: Update ONIE Firmware" translate="no">​</a></h4>
<p>From the ONIE prompt, update the ONIE firmware using the HTTP server (nginx container) we set up in step 4.1:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># In ONIE prompt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">onie-stop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">onie-self-update http://192.168.0.XX:8080/onie-updater.bin</span><br></span></code></pre></div></div>
<p>Replace <code>192.168.0.XX</code> with the IP address of the machine running the nginx container and <code>onie-updater.bin</code> with your actual ONIE firmware filename.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="45-boot-into-onie-mode">4.5: Boot into ONIE Mode<a href="#45-boot-into-onie-mode" class="hash-link" aria-label="Direct link to 4.5: Boot into ONIE Mode" title="Direct link to 4.5: Boot into ONIE Mode" translate="no">​</a></h4>
<p>After ONIE firmware is updated, reboot the switch to boot into ONIE:</p>
<p>From the switch console:</p>
<ol>
<li class="">Reboot the switch:<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo reboot</span><br></span></code></pre></div></div>
</li>
<li class="">Hit DEL after Grub selection</li>
<li class="">Select &quot;ONIE: Install OS&quot;</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-5-install-sonic-via-hedgehog">Step 5: Install SONiC via HedgeHog<a href="#step-5-install-sonic-via-hedgehog" class="hash-link" aria-label="Direct link to Step 5: Install SONiC via HedgeHog" title="Direct link to Step 5: Install SONiC via HedgeHog" translate="no">​</a></h3>
<p>Once switches are in ONIE mode, HedgeHog will automatically detect them on the management network and begin SONiC installation via DHCP.</p>
<p>Monitor agent heartbeats and configuration from the control node:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># SSH to control node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh core@&lt;control-node-ip&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Watch for agent heartbeats and configuration generation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get agent -o wide -w</span><br></span></code></pre></div></div>
<p>Wait for agents to send heartbeats and show current/applied configuration generation.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="step-6-verification">Step 6: Verification<a href="#step-6-verification" class="hash-link" aria-label="Direct link to Step 6: Verification" title="Direct link to Step 6: Verification" translate="no">​</a></h3>
<p>List switches and SSH to them:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># List switches to get switch names</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get switches</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># SSH to a switch using its name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl fabric switch ssh --name &lt;switch-name&gt;</span><br></span></code></pre></div></div>
<p>Use the default HedgeHog admin password when prompted.</p>
<p><strong>Troubleshooting:</strong> If the agent doesn&#x27;t send heartbeats, check the agent logs via serial console:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># From switch serial console</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /var/log/agent.log</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="control-vm-wont-boot">Control VM Won&#x27;t Boot<a href="#control-vm-wont-boot" class="hash-link" aria-label="Direct link to Control VM Won&#x27;t Boot" title="Direct link to Control VM Won&#x27;t Boot" translate="no">​</a></h3>
<ul>
<li class="">Verify ISO downloaded completely: <code>sha256sum hedgehog-installer.iso</code></li>
<li class="">Check VM resources are sufficient (8-12 vCPU, 16 GiB RAM, 35 GB disk)</li>
<li class="">Review VM console logs: <code>sudo virsh console ${VM_NAME}</code></li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="switch-not-getting-onie-firmware">Switch Not Getting ONIE Firmware<a href="#switch-not-getting-onie-firmware" class="hash-link" aria-label="Direct link to Switch Not Getting ONIE Firmware" title="Direct link to Switch Not Getting ONIE Firmware" translate="no">​</a></h3>
<ul>
<li class="">Verify HTTP server is accessible: <code>curl http://192.168.0.XX:8080/onie-updater.bin</code></li>
<li class="">Check switch can reach HTTP server from management network</li>
<li class="">Verify ONIE firmware file is in correct directory</li>
<li class="">Check nginx container is running: <code>docker ps</code></li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="switches-not-appearing-in-fabric">Switches Not Appearing in Fabric<a href="#switches-not-appearing-in-fabric" class="hash-link" aria-label="Direct link to Switches Not Appearing in Fabric" title="Direct link to Switches Not Appearing in Fabric" translate="no">​</a></h3>
<ul>
<li class="">Verify control node has connectivity to management network</li>
<li class="">Check DHCP is working on management network</li>
<li class="">Review the HedgeHog installation log:<!-- -->
<ul>
<li class=""><code>tail -f /var/log/install.log</code></li>
</ul>
</li>
<li class="">Review fabric controller logs:<!-- -->
<ul>
<li class=""><code>kubectl logs -n fab -l app.kubernetes.io/name=fabricator</code></li>
<li class=""><code>kubectl logs -n fab -l app.kubernetes.io/name=fabric</code></li>
</ul>
</li>
<li class="">Ensure switches completed ONIE update and rebooted</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="cant-ssh-to-control-node">Can&#x27;t SSH to Control Node<a href="#cant-ssh-to-control-node" class="hash-link" aria-label="Direct link to Can&#x27;t SSH to Control Node" title="Direct link to Can&#x27;t SSH to Control Node" translate="no">​</a></h3>
<ul>
<li class="">Console into VM and check IP addresses: <code>virsh console ${VM_NAME}</code> then <code>ip -br addr show</code></li>
<li class="">Verify VM got IP via DHCP on management network</li>
<li class="">Check network bridge configuration on bastion</li>
<li class="">Verify VM network is connected to management network</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References" translate="no">​</a></h2>
<ul>
<li class="">HedgeHog Official Documentation: <a href="https://docs.hedgehog.cloud/" target="_blank" rel="noopener noreferrer" class="">https://docs.hedgehog.cloud/</a></li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/phoenix-documentation/docs/v1.3/service-operator/INSTALL_BAREMETAL_NODE"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Ironic Baremetal Node Creation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/phoenix-documentation/docs/v1.3/service-operator/OBSERVABILITY_ALERTS"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Observability Alerts</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-youre-doing" class="table-of-contents__link toc-highlight">What You&#39;re Doing</a></li><li><a href="#before-you-start" class="table-of-contents__link toc-highlight">Before You Start</a><ul><li><a href="#prerequisites-checklist" class="table-of-contents__link toc-highlight">Prerequisites Checklist</a></li><li><a href="#bastion-node-access" class="table-of-contents__link toc-highlight">Bastion Node Access</a></li><li><a href="#control-node-iso" class="table-of-contents__link toc-highlight">Control Node ISO</a></li><li><a href="#switch-access" class="table-of-contents__link toc-highlight">Switch Access</a></li></ul></li><li><a href="#installation-steps" class="table-of-contents__link toc-highlight">Installation Steps</a><ul><li><a href="#step-1-download-control-node-iso" class="table-of-contents__link toc-highlight">Step 1: Download Control Node ISO</a></li><li><a href="#step-2-create-control-vm-on-bastion" class="table-of-contents__link toc-highlight">Step 2: Create Control VM on Bastion</a></li><li><a href="#step-3-verify-control-node" class="table-of-contents__link toc-highlight">Step 3: Verify Control Node</a></li><li><a href="#step-4-prepare-switches-for-sonic-installation" class="table-of-contents__link toc-highlight">Step 4: Prepare Switches for SONiC Installation</a></li><li><a href="#step-5-install-sonic-via-hedgehog" class="table-of-contents__link toc-highlight">Step 5: Install SONiC via HedgeHog</a></li><li><a href="#step-6-verification" class="table-of-contents__link toc-highlight">Step 6: Verification</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#control-vm-wont-boot" class="table-of-contents__link toc-highlight">Control VM Won&#39;t Boot</a></li><li><a href="#switch-not-getting-onie-firmware" class="table-of-contents__link toc-highlight">Switch Not Getting ONIE Firmware</a></li><li><a href="#switches-not-appearing-in-fabric" class="table-of-contents__link toc-highlight">Switches Not Appearing in Fabric</a></li><li><a href="#cant-ssh-to-control-node" class="table-of-contents__link toc-highlight">Can&#39;t SSH to Control Node</a></li></ul></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://midokura.com" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/phoenix-documentation/img/logo-midokura.png" alt="Midokura" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/phoenix-documentation/img/logo-midokura.png" alt="Midokura" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">©2026 Midokura</div></div></div></footer></div>
</body>
</html>